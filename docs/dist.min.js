var e,t="readystatechange";var n=e=>`color: ${e}; font-weight: bold;`,o="#f012be";function r({component:e,e:t,module:r,color:s}){if("boolean"==typeof __DEV__&&!__DEV__)return;const c=t.type;"object"==typeof DEBUG_IGNORE&&DEBUG_IGNORE?.has(c)||(console.groupCollapsed(`${r}> %c${c}%c on %c${e}`,n(s||o),"",n("#1a80cc")),console.log(t),t.target&&console.log(t.target),console.groupEnd())}var s=class{#e;#t=[];constructor(e){this.#e=e}get(){return this.#e}update(e){this.#e!==e&&(this.#e=e,this.#t.forEach((t=>{t(e)})))}updateByFields(e){if("object"!=typeof e||null===e)throw new Error("value must be an object");for(const t of Object.keys(e))if(this.#e[t]!==e[t]){this.#e={...e},this.#t.forEach((e=>{e(this.#e)}));break}}onChange(e){return this.#t.push(e),()=>{this.#t.splice(this.#t.indexOf(e)>>>0,1)}}};function c(e){return new s(e)}var i={};function a(e,t){if(!e)throw new Error(t)}function l(n,o){a("string"==typeof o&&!!o,"Component name must be a non-empty string"),a(!i[o],`The component of the given name is already registered: ${o}`);const s=`${o}-ðŸ’Š`,c=e=>{if(!e.classList.contains(s)){e.classList.add(o),e.classList.add(s),e.addEventListener(`__unmount__:${o}`,(()=>{e.classList.remove(s)}),{once:!0});const t=new Proxy((()=>{}),{set:(t,n,r)=>(u(o,e,n,r),!0),get:(t,n)=>"outside"===n?new Proxy({},{set(t,n,s){a("function"==typeof s,`Event handler must be a function, ${typeof s} (${s}) is given`);const c=t=>{e===t.target||e.contains(t.target)||(r({module:"outside",color:"#39cccc",e:t,component:o}),s(t))};return document.addEventListener(n,c),e.addEventListener(`__unmount__:${o}`,(()=>{document.removeEventListener(n,c)}),{once:!0}),!0}}):null,apply(t,n,r){const s=r[0];if("string"==typeof s)return new Proxy({},{set:(t,n,c)=>(u(o,e,n,c,s,r[1]),!0)});if(s&&"object"==typeof s)return new Proxy({},{set:(t,n,r)=>(u(o,e,n,r,void 0,s),!0)});throw new Error(`Invalid on(...) call: ${typeof s} is given.`)}}),c=n({el:e,on:t,query:t=>e.querySelector(t),queryAll:t=>e.querySelectorAll(t)});"string"==typeof c?e.innerHTML=c:c&&"function"==typeof c.then&&c.then((t=>{"string"==typeof t&&(e.innerHTML=t)}))}};c.sel=`.${o}:not(.${s})`,i[o]=c,"complete"===document.readyState?d():function(n=document){return e??=new Promise((e=>{const o=()=>{"complete"===n.readyState&&(e(),n.removeEventListener(t,o))};n.addEventListener(t,o),o()})),e}().then((()=>{d(o)}))}function u(e,t,n,o,s,c){a("function"==typeof o,`Event handler must be a function, ${typeof o} (${o}) is given`);const i=n=>{s&&![].some.call(t.querySelectorAll(s),(e=>e===n.target||e.contains(n.target)))||(r({module:"ðŸ’Š",color:"#e0407b",e:n,component:e}),o(n))};t.addEventListener(`__unmount__:${e}`,(()=>{t.removeEventListener(n,i,c)}),{once:!0}),t.addEventListener(n,i,c)}function d(e,t){let n;e?(!function(e){a("string"==typeof e,"The name should be a string"),a(!!i[e],`The component of the given name is not registered: ${e}`)}(e),n=[e]):n=Object.keys(i),n.map((e=>{[].map.call((t||document).querySelectorAll(i[e].sel),i[e])}))}function f(e,t){a(!!i[e],`The component of the given name is not registered: ${e}`),t.dispatchEvent(new CustomEvent(`__unmount__:${e}`))}export{d as mount,l as register,c as signal,f as unmount};
/*! Cell v0.1.10 | Copyright 2024 Yoshiya Hinosawa and Capsule contributors | MIT license */